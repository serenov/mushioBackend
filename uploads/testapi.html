<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form</title>
</head>

<body>
    <form action="">
        <label for="title">Title</label>
        <input type="text" id="title">
        <label for="description">Description</label>
        <input type="text" id="description">
        <label for="emoji_id">Emoji ID</label>
        <input type="text" id="emoji_id">
        <input type="file" id="image">
        <button id="submit">Submit</button>
    </form>
    <script>
        document.getElementById('submit').addEventListener('click', async (e) => {
            e.preventDefault();

            // Collect form data
            const title = document.getElementById('title').value;
            const description = document.getElementById('description').value;
            const emoji_id = document.getElementById('emoji_id').value;
            const image = document.getElementById('image').files[0];

            // Construct a FormData object
            const formData = new FormData();
            formData.append('title', title);
            formData.append('description', description);
            formData.append('emoji_id', emoji_id);
            formData.append('image', image);

            // Get the bearer token (replace with your actual token retrieval)
            const token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjUyYmE3Nzc5ZTAyMmE5YjYyOTlhMzAyIiwiaWF0IjoxNjk3MzU5NzUyLCJleHAiOjE2OTczNjMzNTJ9.-KFL8L2ucTW--W94P9aaWJYmzYBZXxkyqqxdEvDXV-E';

            // Make a request to the backend using fetch
            try {
                const response = await fetch('/api/user/postRecord', {
                    method: 'POST',
                    headers: {
                        Authorization: `Bearer ${token}`, // Add the bearer token to the headers
                    },
                    body: formData, // Send the FormData object
                });

                if (response.ok) {
                    console.log('Record added successfully');
                    // Handle success
                } else {
                    console.error('Failed to add record');
                    // Handle errors
                    console.log(response)
                }
            } catch (error) {
                console.error('Error:', error);
            }
        });
    </script>
</body>
</html>